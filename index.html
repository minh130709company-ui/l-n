<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üíñ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            background: #000;
            font-family: 'Arial', sans-serif;
            height: 100vh;
            overflow: hidden;
            cursor: pointer;
            user-select: none;
            touch-action: manipulation;
        }
        
        /* M√†n h√¨nh b·∫Øt ƒë·∫ßu */
        #startScreen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 100;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 1s;
        }
        
        .start-hint {
            color: rgba(255, 255, 255, 0.2);
            font-size: 1.2rem;
            text-align: center;
            animation: pulseHint 2s infinite;
            padding: 20px;
            border-radius: 20px;
            background: rgba(255, 105, 180, 0.05);
        }
        
        @keyframes pulseHint {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 0.1; }
        }
        
        /* Heart Rain 20s */
        #heartRain {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            display: none;
        }
        
        .heart {
            position: absolute;
            color: #ff69b4;
            font-size: 0;
            opacity: 0;
            animation: heartFall linear forwards;
            filter: drop-shadow(0 0 10px rgba(255, 105, 180, 0.7));
            z-index: 1;
        }
        
        @keyframes heartFall {
            to {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0.8;
            }
        }
        
        /* Tr√≤ ch∆°i */
        #gameSection {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            background: rgba(10, 10, 26, 0.95);
            display: none;
        }
        
        .game-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            width: 90%;
            max-width: 500px;
        }
        
        .game-title {
            font-size: 2rem;
            color: #ff69b4;
            margin-bottom: 30px;
            text-shadow: 0 0 10px rgba(255, 105, 180, 0.5);
            opacity: 0;
        }
        
        .piggy {
            width: 180px;
            height: 180px;
            background: linear-gradient(135deg, #ffb6c1, #ff69b4);
            border-radius: 50%;
            margin: 0 auto 25px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3),
                        inset 0 -10px 20px rgba(0, 0, 0, 0.2);
            cursor: pointer;
            opacity: 0;
            transition: transform 0.3s;
        }
        
        .piggy:hover {
            transform: scale(1.05);
        }
        
        .pig-face {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
        }
        
        .pig-eyes {
            display: flex;
            justify-content: space-between;
            width: 70px;
            position: absolute;
            top: 25px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .eye {
            width: 18px;
            height: 18px;
            background: white;
            border-radius: 50%;
            position: relative;
        }
        
        .pupil {
            width: 9px;
            height: 9px;
            background: #333;
            border-radius: 50%;
            position: absolute;
            top: 4px;
            left: 4px;
        }
        
        .pig-nose {
            width: 35px;
            height: 18px;
            background: #ff8cc3;
            border-radius: 50%;
            position: absolute;
            top: 50px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .nostril {
            width: 7px;
            height: 7px;
            background: #333;
            border-radius: 50%;
            position: absolute;
            top: 5px;
        }
        
        .nostril.left {
            left: 7px;
        }
        
        .nostril.right {
            right: 7px;
        }
        
        .pig-smile {
            width: 45px;
            height: 18px;
            border-bottom: 3px solid #333;
            border-radius: 0 0 25px 25px;
            position: absolute;
            top: 75px;
            left: 50%;
            transform: translateX(-50%);
        }
        
        .game-info {
            color: #fff;
            font-size: 1.2rem;
            margin-bottom: 20px;
            opacity: 0;
        }
        
        .score {
            color: #ffcc00;
        }
        
        .timer {
            color: #66ccff;
        }
        
        /* Ph·∫ßn l·ª±a ch·ªçn v·ªõi 2 n√∫t */
        #choiceSection {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 3;
            background: rgba(10, 10, 26, 0.98);
            display: none;
        }
        
        .choice-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            width: 90%;
            max-width: 500px;
        }
        
        .choice-title {
            font-size: 2rem;
            color: #ff69b4;
            margin-bottom: 40px;
            text-shadow: 0 0 10px rgba(255, 105, 180, 0.5);
            opacity: 0;
        }
        
        .choice-buttons {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
            opacity: 0;
        }
        
        .choice-btn {
            background: none;
            border: none;
            border-radius: 50px;
            padding: 20px 40px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            min-width: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            color: white;
            font-weight: bold;
        }
        
        .btn-forgive {
            background: linear-gradient(135deg, #66ff99, #33cc66);
            box-shadow: 0 10px 30px rgba(51, 204, 102, 0.4);
        }
        
        .btn-angry {
            background: linear-gradient(135deg, #ff6666, #ff3366);
            box-shadow: 0 10px 30px rgba(255, 51, 102, 0.4);
        }
        
        .btn-forgive:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(51, 204, 102, 0.6);
        }
        
        .btn-angry:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(255, 51, 102, 0.6);
        }
        
        .btn-forgive.enlarged {
            transform: scale(1.5);
            z-index: 10;
            transition: transform 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        /* Hi·ªáu ·ª©ng xu */
        .coin-effect {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 4;
        }
        
        .coin {
            position: absolute;
            font-size: 0;
            opacity: 0;
            animation: coinFly linear forwards;
        }
        
        @keyframes coinFly {
            to {
                transform: translateY(-100vh) rotate(720deg);
                opacity: 0.8;
            }
        }
        
        /* Hi·ªáu ·ª©ng chung */
        .fade-in {
            animation: fadeIn 0.8s ease forwards;
        }
        
        @keyframes fadeIn {
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        .pulse {
            animation: pulse 0.5s ease;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
        
        .heart-rain-special {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 5;
        }
        
        /* Message hi·ªán sau khi ch·ªçn */
        .special-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            padding: 25px 35px;
            border-radius: 20px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
            z-index: 6;
            text-align: center;
            max-width: 85%;
            opacity: 0;
            display: none;
            border: 3px solid #ff69b4;
        }
        
        .special-message h2 {
            color: #ff69b4;
            font-size: 1.8rem;
            margin-bottom: 10px;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .game-title, .choice-title {
                font-size: 1.5rem;
            }
            
            .piggy {
                width: 150px;
                height: 150px;
            }
            
            .choice-btn {
                padding: 15px 30px;
                font-size: 1.2rem;
                min-width: 150px;
            }
            
            .btn-forgive.enlarged {
                transform: scale(1.3);
            }
        }
        
        @media (max-width: 480px) {
            .choice-buttons {
                flex-direction: column;
                align-items: center;
                gap: 20px;
            }
            
            .choice-btn {
                width: 100%;
                max-width: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- M√†n h√¨nh b·∫Øt ƒë·∫ßu -->
    <div id="startScreen">
        <div class="start-hint">Ch·∫°m v√†o m√†n h√¨nh ƒë·ªÉ b·∫Øt ƒë·∫ßu üíñ</div>
    </div>
    
    <!-- M∆∞a tim 20s -->
    <div id="heartRain"></div>
    
    <!-- Tr√≤ ch∆°i -->
    <div id="gameSection">
        <div class="game-container">
            <h1 class="game-title">üê∑ Cho heo con ƒÉn xu</h1>
            <div class="game-info">
                <span class="score">Xu: <span id="score">0</span></span>
                &nbsp;‚Ä¢&nbsp;
                <span class="timer">‚è±Ô∏è <span id="timer">30</span>s</span>
            </div>
            
            <div class="piggy" id="piggy">
                <div class="pig-face">
                    <div class="pig-eyes">
                        <div class="eye">
                            <div class="pupil"></div>
                        </div>
                        <div class="eye">
                            <div class="pupil"></div>
                        </div>
                    </div>
                    <div class="pig-nose">
                        <div class="nostril left"></div>
                        <div class="nostril right"></div>
                    </div>
                    <div class="pig-smile"></div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Ph·∫ßn l·ª±a ch·ªçn -->
    <div id="choiceSection">
        <div class="choice-container">
            <h1 class="choice-title">Em c√≥ c√≤n gi·∫≠n t·ªõ kh√¥ng? üò¢</h1>
            <div class="choice-buttons">
                <button class="choice-btn btn-forgive" id="forgiveBtn">
                    <span>‚ù§Ô∏è</span> H·∫øt gi·∫≠n
                </button>
                <button class="choice-btn btn-angry" id="angryBtn">
                    <span>üò†</span> √âo gi·∫≠n
                </button>
            </div>
        </div>
    </div>
    
    <!-- Hi·ªáu ·ª©ng xu -->
    <div class="coin-effect" id="coinEffect"></div>
    
    <!-- Hi·ªáu ·ª©ng tim ƒë·∫∑c bi·ªát -->
    <div class="heart-rain-special" id="heartRainSpecial"></div>
    
    <!-- Message ƒë·∫∑c bi·ªát -->
    <div class="special-message" id="specialMessage"></div>

    <!-- Audio Files -->
    <audio id="voice1" preload="auto">
        <source src="1.m4a" type="audio/mp4">
    </audio>
    
    <audio id="voice2" preload="auto">
        <source src="2.m4a" type="audio/mp4">
    </audio>
    
    <audio id="voice3" preload="auto">
        <source src="3.m4a" type="audio/mp4">
    </audio>
    
    <audio id="voice4" preload="auto">
        <source src="4.m4a" type="audio/mp4">
    </audio>
    
    <audio id="voice5" preload="auto">
        <source src="5.m4a" type="audio/mp4">
    </audio>

    <script>
        // ==================== BI·∫æN TO√ÄN C·ª§C ====================
        let gameState = 'start';
        let score = 0;
        let timeLeft = 30;
        let gameTimer;
        let gameActive = false;
        let heartInterval;
        let heartRainCount = 0;
        
        // ==================== L·∫§Y ELEMENT ====================
        const startScreen = document.getElementById('startScreen');
        const heartRain = document.getElementById('heartRain');
        const gameSection = document.getElementById('gameSection');
        const choiceSection = document.getElementById('choiceSection');
        const piggy = document.getElementById('piggy');
        const coinEffect = document.getElementById('coinEffect');
        const heartRainSpecial = document.getElementById('heartRainSpecial');
        const specialMessage = document.getElementById('specialMessage');
        const scoreElement = document.getElementById('score');
        const timerElement = document.getElementById('timer');
        const forgiveBtn = document.getElementById('forgiveBtn');
        const angryBtn = document.getElementById('angryBtn');
        
        // Audio elements
        const voice1 = document.getElementById('voice1');
        const voice2 = document.getElementById('voice2');
        const voice3 = document.getElementById('voice3');
        const voice4 = document.getElementById('voice4');
        const voice5 = document.getElementById('voice5');
        
        // ==================== H√ÄM TI·ªÜN √çCH ====================
        function showElement(element) {
            element.style.display = 'block';
            return new Promise(resolve => {
                setTimeout(() => {
                    element.style.opacity = '1';
                    resolve();
                }, 50);
            });
        }
        
        function hideElement(element) {
            element.style.opacity = '0';
            return new Promise(resolve => {
                setTimeout(() => {
                    element.style.display = 'none';
                    resolve();
                }, 1000);
            });
        }
        
        function playVoice(voiceElement) {
            voiceElement.currentTime = 0;
            voiceElement.play().catch(e => {
                console.log("Kh√¥ng th·ªÉ ph√°t √¢m thanh:", e);
            });
        }
        
        // ==================== T·∫†O TR√ÅI TIM R∆†I ====================
        function createHeart(container, x = null, y = null, special = false) {
            const heart = document.createElement('div');
            heart.className = 'heart';
            heart.innerHTML = '‚ù§Ô∏è';
            
            if (x === null || y === null) {
                heart.style.left = Math.random() * 100 + 'vw';
                heart.style.top = '-50px';
            } else {
                heart.style.left = x + 'px';
                heart.style.top = y + 'px';
            }
            
            const size = special ? 
                Math.random() * 50 + 40 : 
                Math.random() * 40 + 30;
            heart.style.fontSize = size + 'px';
            
            const duration = special ? 
                Math.random() * 2 + 8 : 
                Math.random() * 2 + 10;
            heart.style.animationDuration = duration + 's';
            
            const colors = ['#ff69b4', '#ff8cc3', '#ff33cc', '#ff66cc', '#ff3399'];
            heart.style.color = colors[Math.floor(Math.random() * colors.length)];
            
            container.appendChild(heart);
            
            setTimeout(() => {
                heart.style.opacity = '1';
            }, 10);
            
            setTimeout(() => {
                if (heart.parentNode === container) {
                    container.removeChild(heart);
                }
            }, duration * 1000);
            
            return heart;
        }
        
        // ==================== T·∫†O M∆ØA TIM ƒê·∫∂C BI·ªÜT ====================
        function createHeartStorm(count, sourceX = null, sourceY = null) {
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    createHeart(heartRainSpecial, sourceX, sourceY, true);
                }, i * 50);
            }
        }
        
        // ==================== M√ÄN H√åNH B·∫ÆT ƒê·∫¶U ====================
        function initStartScreen() {
            startScreen.addEventListener('click', async () => {
                // ·∫®n m√†n h√¨nh b·∫Øt ƒë·∫ßu
                await hideElement(startScreen);
                
                // B·∫Øt ƒë·∫ßu m∆∞a tim 20s
                startHeartRain20s();
            });
        }
        
        // ==================== M∆ØA TIM 20 GI√ÇY ====================
        function startHeartRain20s() {
            gameState = 'heartRain';
            showElement(heartRain);
            
            // Ph√°t voice1 (20 gi√¢y ƒë·∫ßu)
            playVoice(voice1);
            
            // T·∫°o tr√°i tim li√™n t·ª•c
            heartInterval = setInterval(() => {
                for (let i = 0; i < 6; i++) {
                    createHeart(heartRain);
                    heartRainCount++;
                }
            }, 200);
            
            // D·ª´ng sau 20 gi√¢y
            setTimeout(() => {
                clearInterval(heartInterval);
                voice1.pause();
                
                // Chuy·ªÉn sang tr√≤ ch∆°i
                setTimeout(() => {
                    hideElement(heartRain).then(() => {
                        startGame();
                    });
                }, 500);
            }, 20000); // 20 gi√¢y
        }
        
        // ==================== TR√í CH∆†I ====================
        function startGame() {
            gameState = 'game';
            showElement(gameSection);
            
            // Reset game
            score = 0;
            timeLeft = 30;
            gameActive = false;
            
            updateScore();
            updateTimer();
            
            // Hi·ªáu ·ª©ng xu·∫•t hi·ªán
            setTimeout(() => {
                document.querySelector('.game-title').classList.add('fade-in');
                document.querySelector('.game-info').classList.add('fade-in');
                piggy.classList.add('fade-in');
            }, 100);
            
            // ƒê·∫øm ng∆∞·ª£c b·∫Øt ƒë·∫ßu
            setTimeout(() => {
                startGameTimer();
                gameActive = true;
            }, 3000);
        }
        
        function startGameTimer() {
            gameTimer = setInterval(() => {
                timeLeft--;
                updateTimer();
                
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }
        
        function updateScore() {
            scoreElement.textContent = score;
        }
        
        function updateTimer() {
            timerElement.textContent = timeLeft;
            
            if (timeLeft <= 10) {
                timerElement.style.color = '#ff6666';
            }
        }
        
        function createCoin(x, y) {
            const coin = document.createElement('div');
            coin.className = 'coin';
            coin.textContent = 'üí∞';
            coin.style.left = x + 'px';
            coin.style.top = y + 'px';
            coin.style.fontSize = (Math.random() * 30 + 20) + 'px';
            coin.style.animationDuration = (Math.random() * 1 + 1) + 's';
            
            coinEffect.appendChild(coin);
            
            setTimeout(() => {
                coin.style.opacity = '1';
            }, 10);
            
            setTimeout(() => {
                if (coin.parentNode) {
                    coinEffect.removeChild(coin);
                }
            }, 2000);
        }
        
        function endGame() {
            gameActive = false;
            clearInterval(gameTimer);
            
            setTimeout(() => {
                hideElement(gameSection).then(() => {
                    showChoiceSection();
                });
            }, 1500);
        }
        
        // ==================== PH·∫¶N L·ª∞A CH·ªåN ====================
        function showChoiceSection() {
            gameState = 'choice';
            showElement(choiceSection);
            
            setTimeout(() => {
                document.querySelector('.choice-title').classList.add('fade-in');
                setTimeout(() => {
                    document.querySelector('.choice-buttons').classList.add('fade-in');
                }, 300);
            }, 100);
        }
        
        // ==================== X·ª¨ L√ù S·ª∞ KI·ªÜN ====================
        // Click v√†o heo con
        piggy.addEventListener('click', function(e) {
            if (!gameActive) return;
            
            score++;
            updateScore();
            
            const rect = piggy.getBoundingClientRect();
            const x = rect.left + rect.width / 2;
            const y = rect.top + rect.height / 2;
            
            // Ph√°t voice2 (khi heo n·ªï)
            playVoice(voice2);
            
            // T·∫°o 3 xu
            for (let i = 0; i < 3; i++) {
                setTimeout(() => {
                    createCoin(x, y);
                }, i * 100);
            }
            
            // Hi·ªáu ·ª©ng nh·∫•p nh√°y
            piggy.classList.add('pulse');
            setTimeout(() => {
                piggy.classList.remove('pulse');
            }, 500);
        });
        
        // N√∫t "H·∫øt gi·∫≠n"
        forgiveBtn.addEventListener('click', function() {
            // Ph√°t voice3, voice4, ho·∫∑c voice5 ng·∫´u nhi√™n
            const voices = [voice3, voice4, voice5];
            const randomVoice = voices[Math.floor(Math.random() * voices.length)];
            playVoice(randomVoice);
            
            // Hi·ªÉn th·ªã message t∆∞∆°ng ·ª©ng
            showSpecialMessage(randomVoice);
            
            // T·∫°o m∆∞a tim
            createHeartStorm(100);
            
            // ·∫®n c√°c n√∫t
            document.querySelector('.choice-buttons').style.opacity = '0';
        });
        
        // N√∫t "√âo gi·∫≠n"
        angryBtn.addEventListener('click', function() {
            // Ph√°t voice3, voice4, ho·∫∑c voice5 ng·∫´u nhi√™n
            const voices = [voice3, voice4, voice5];
            const randomVoice = voices[Math.floor(Math.random() * voices.length)];
            playVoice(randomVoice);
            
            // Hi·ªÉn th·ªã message t∆∞∆°ng ·ª©ng
            showSpecialMessage(randomVoice);
            
            // L√†m n√∫t "H·∫øt gi·∫≠n" to l√™n
            forgiveBtn.classList.add('enlarged');
            
            // T·∫°o R·∫§T NHI·ªÄU tim (200 tr√°i tim)
            createHeartStorm(200);
            
            // ·∫®n n√∫t "√âo gi·∫≠n"
            angryBtn.style.opacity = '0';
            angryBtn.style.pointerEvents = 'none';
        });
        
        // Hi·ªÉn th·ªã message ƒë·∫∑c bi·ªát
        function showSpecialMessage(voiceElement) {
            let messageText = "";
            
            if (voiceElement === voice3) {
                messageText = "B√© ng·ªëc ∆°i, khummm b√πn, khumm nghƒ© n·ªØa, t·ªõ ƒë√¢y √≤iii üíñ";
            } else if (voiceElement === voice4) {
                messageText = "Em b√© ng·ªëc, chi·ªÅu g·∫∑p m√¨nh √≤iiiiii ü•∞";
            } else if (voiceElement === voice5) {
                messageText = "L·ª£n ∆°i t·ªõ th∆∞∆°ng em l·∫Øm √Ω :( üíï";
            }
            
            specialMessage.innerHTML = `<h2>${messageText}</h2>`;
            
            setTimeout(() => {
                showElement(specialMessage);
                specialMessage.style.opacity = '1';
                specialMessage.style.transform = 'translate(-50%, -50%) scale(1)';
                specialMessage.style.transition = 'all 0.8s cubic-bezier(0.34, 1.56, 0.64, 1)';
            }, 500);
            
            // T·ª± ƒë·ªông ·∫©n sau 5 gi√¢y
            setTimeout(() => {
                specialMessage.style.opacity = '0';
                specialMessage.style.transform = 'translate(-50%, -50%) scale(0.8)';
                setTimeout(() => {
                    specialMessage.style.display = 'none';
                }, 800);
            }, 5000);
        }
        
        // ==================== KH·ªûI CH·∫†Y ====================
        document.addEventListener('DOMContentLoaded', function() {
            initStartScreen();
        });
        
        // X·ª≠ l√Ω resize
        window.addEventListener('resize', function() {
            // C·∫≠p nh·∫≠t k√≠ch th∆∞·ªõc n·∫øu c·∫ßn
        });
    </script>
</body>
</html>
